---
title: "p8105_hw5_lk2776"
output: html_document
date: "2024-11-05"
---

#Problem 2 
Fixğ‘› = 30
Fix ğœ = 5
Set ğœ‡ = 0. Generate 5000 datasets from the model
ğ‘¥ âˆ¼ ğ‘ğ‘œğ‘Ÿğ‘šğ‘ğ‘™[ğœ‡, ğœ]
For each dataset, save ğœ‡Ì‚ and the p-value arising from a test of ğ» : ğœ‡ = 0 using ğ›¼ = 0.05.
Hint: to obtain the estimate and p-value, use
broom::tidy to clean the output of t.test .


```{r}
library(tidyverse)
library(purrr)
library(broom)
```

```{r}
#function
sim_mean_sd = function(n, mu = 0, sigma = 5) {
  sim_data = tibble(
    x = rnorm(n, mean = mu, sd = sigma),
)
  
  t_test_out <- t.test(sim_data$x,mu = mu)
  
  tidy(t_test_out)|>
    select(estimate, p.value) 
  #sim_data |>
    #summarize(
      #mu_hat = mean(x),
      #sigma_hat = sd(x),
    
}

#Run function on datasets
sim_results_df =
  expand_grid(
    sample_size = 30,
    iter = 1:5000
  ) |>
  mutate(
    estimate_df = map(sample_size,\(x) sim_mean_sd(x))
  ) |>
  unnest(estimate_df)
```

```{r}
broom::tidy 
x <- c(1,2,3)
z = t.test(x)
broom::tidy(z)
```

Repeat the above for ğœ‡ = {1, 2, 3, 4, 5, 6}, and complete the following: